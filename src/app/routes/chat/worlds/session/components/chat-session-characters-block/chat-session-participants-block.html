<div class="card">
  <div class="card-body">
    <h5 class="card-title">Participants</h5>

    <div class="mb-4 grid gap-1">
      @for (p of participants(); track p.characterId) {
        <div class="g-col-6">
          <scalable class="mx-auto">
            <app-character-card [character]="p.characterId">
              <button type="button" class="btn btn-outline-danger"
                      title="Remove from chat session"
                      (click)="onRemoveParticipant(p)">
                <span class="bi bi-x"></span>
              </button>
              <button type="button" class="btn btn-outline-secondary"
                      title="Go to character edit"
                      [routerLink]="['/chat/characters', p.characterId]">
                <span class="bi bi-pencil"></span>
              </button>
              <button type="button" class="btn"
                      [class.btn-outline-warning]="!p.muted"
                      [class.btn-warning]="p.muted"
                      title="Mute/Unmute character"
                      (click)="onToggleMute(p)">
                <span class="bi"
                      [class.bi-mic]="!p.muted"
                      [class.bi-mic-mute]="p.muted"></span>
              </button>
              <button type="button" class="btn btn-primary"
                      title="Trigger response"
                      (click)="onTriggerResponse(p)">
                <span class="bi bi-chat"></span>
              </button>
            </app-character-card>
          </scalable>
        </div>
      }
    </div>

    <label>Add Participants</label>
    <div class="grid gap-1">
      @for (char of available(); track char.id) {
        <div class="g-col-6 g-col-lg-4">
          <scalable class="mx-auto">
            <app-character-card [character]="char">
              <button type="button" class="btn btn-success w-100"
                      title="Add to chat session"
                      (click)="onAddParticipant(char)">
                <span class="bi bi-plus-lg"></span>
              </button>
            </app-character-card>
          </scalable>
        </div>
      }
    </div>
  </div>
</div>
