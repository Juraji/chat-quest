<form [formGroup]="formGroup" (submit)="onSendMessage()">
  <div class="input-group">
      <textarea type="text" class="form-control" rows="3"
                placeholder="Send your message!"
                id="messageInput"
                aria-describedby="messageInputHelp"
                formControlName="message"
                (keydown)="onInputKeyDown($event)"></textarea>
    <button class="btn btn-primary"
            [disabled]="formGroup.invalid || formGroup.pristine">
      <span class="bi bi-send"></span>
    </button>
  </div>
  <div class="d-flex align-items-center gap-2">
    <div id="messageInputHelp" class="form-text flex-grow-1">
      Press <kbd>Ctrl + Enter</kbd> to send.
    </div>
    @if (lastTotalTokens(); as t) {
      <div class="badge text-bg-success mt-1"
           title="The amount of real tokens used in total to produce the the latest response.">
        <span>Used {{ t }} tokens</span>
        <span class="bi bi-question-circle ms-1"></span>
      </div>
    }
    <div class="badge text-bg-success mt-1">
      <span>{{ totalMessageCount() }} messages</span>
    </div>
    <app-token-count [text]="messageValue()"/>
  </div>
</form>
