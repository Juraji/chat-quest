<div class="card">
  <div class="card-body">
    <div class="mb-1">
      <h5 class="card-title mb-0">Session Details</h5>
      <h6 class="small text-muted mb-0">In {{ worldName() }}</h6>
      <div class="small text-muted">Started at {{ createdAt() | date }}</div>
    </div>

    <div class="mb-3">
      <input type="text" class="form-control"
             id="chatNameInput"
             placeholder="Name"
             [formControl]="nameControl"/>
    </div>
    <div class="mb-3">
      <div class="form-check">
        <input class="form-check-input" type="checkbox"
               id="generateMemoriesInput"
               [formControl]="generateMemoriesControl"/>
        <label class="form-check-label" for="generateMemoriesInput">
          Generate new memories
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox"
               id="useMemoriesInput"
               [formControl]="useMemoriesControl"/>
        <label class="form-check-label" for="useMemoriesInput">
          Use memories
        </label>
      </div>
      <div class="form-check"
           title="Enables auto archival of messages older than the memory trigger, when memory generation is disabled.">
        <input class="form-check-input" type="checkbox"
               id="autoArchiveMessagesInput"
               [formControl]="autoArchiveMessagesControl"/>
        <label class="form-check-label" for="autoArchiveMessagesInput">
          Auto archive messages <span class="bi bi-question-circle small"></span>
        </label>
      </div>
      <div class="form-check mb-1">
        <input class="form-check-input" type="checkbox"
               id="pauseAutomaticResponsesInput"
               [formControl]="pauseAutomaticResponsesControl"/>
        <label class="form-check-label" for="pauseAutomaticResponsesInput">
          Pause Automatic Responses
        </label>
      </div>
    </div>
    <div class="grid gap-1 align-items-center mb-1">
      <div class="g-col-3">
        <label for="personaIdInput">Persona</label>
      </div>
      <div class="g-col-9">
        <div class="input-group input-group-sm">
          <select [formControl]="personaControl"
                  class="form-select"
                  id="personaIdInput">
            <option [ngValue]="null">No persona</option>
            <option disabled>──────────</option>
            @for (c of characters(); track c.id) {
              <option [ngValue]="c.id">{{ c.name }}</option>
            }
          </select>
          <a [routerLink]="['/chat/characters/', personaControl.value]"
             target="_blank"
             class="btn btn-secondary"
             title="Open edit in new window/tab">
            <span class="bi bi-box-arrow-up-right"></span>
          </a>
        </div>
      </div>
    </div>
    <div class="grid gap-1 align-items-center mb-1">
      <div class="g-col-3">
        <label for="chatScenarioInput">Scenario</label>
      </div>
      <div class="g-col-9">
        <div class="input-group input-group-sm">
          <select class="form-select"
                  id="chatScenarioInput"
                  [formControl]="scenarioControl">
            <option [ngValue]="null">No Scenario</option>
            <option disabled>──────────</option>
            @for (scene of scenarios(); track scene.id) {
              <option [ngValue]="scene.id">{{ scene.name }}</option>
            }
          </select>
          <a [routerLink]="['/chat/scenarios/', scenarioControl.value]"
             target="_blank"
             class="btn btn-secondary"
             title="Open edit in new window/tab">
            <span class="bi bi-box-arrow-up-right"></span>
          </a>
        </div>
      </div>
    </div>
    <div class="grid gap-1 align-items-center mb-1">
      <div class="g-col-3">
        <label for="timeOfDayInput">Time of Day</label>
      </div>
      <div class="g-col-9">
        <div class="input-group input-group-sm">
          <select class="form-select"
                  id="timeOfDayInput"
                  [formControl]="timeOfDayControl">
            <option [ngValue]="null">Not Set</option>
            <option disabled>──────────</option>
            <option value="EARLY_MORNING">Early Morning</option>
            <option value="LATE_MORNING">Late Morning</option>
            <option value="EARLY_AFTERNOON">Early Afternoon</option>
            <option value="LATE_AFTERNOON">Late Afternoon</option>
            <option value="EARLY_EVENING">Early Evening</option>
            <option value="LATE_EVENING">Late Evening</option>
            <option value="NIGHT_TIME">Night Time</option>
          </select>
        </div>
      </div>
    </div>
    <div class="grid gap-1 align-items-center mb-1">
      <div class="g-col-3">
        <label for="chatModelIdInput">Chat Model</label>
      </div>
      <div class="g-col-9">
        <div class="input-group input-group-sm">
          <select class="form-select"
                  [formControl]="chatModelControl"
                  id="chatModelIdInput">
            @for (llm of llModels(); track llm.id) {
              <option [ngValue]="llm.id">{{ llm | llmLabel }}</option>
            }
          </select>
          <a [routerLink]="['/settings/connections/', selectedModel().profileId]"
             target="_blank"
             class="btn btn-secondary"
             title="Open edit in new window/tab">
            <span class="bi bi-box-arrow-up-right"></span>
          </a>
        </div>
      </div>
    </div>
    <div class="grid gap-1 align-items-center">
      <div class="g-col-3">
        <label for="chatInstructionInput">Instructions</label>
      </div>
      <div class="g-col-9">
        <div class="input-group input-group-sm">
          <select class="form-select"
                  [formControl]="chatInstructionControl"
                  id="chatInstructionInput">
            @for (inst of instructions(); track inst.id) {
              <option [ngValue]="inst.id">{{ inst.name }}</option>
            }
          </select>
          <a [routerLink]="['/settings/instruction-templates/', chatInstructionControl.value]"
             target="_blank"
             class="btn btn-secondary"
             title="Open edit in new window/tab">
            <span class="bi bi-box-arrow-up-right"></span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
